FROM registry.cn-hangzhou.aliyuncs.com/xvjialing/image_identification:base

# install opencv3.4.2
RUN echo "deb http://security.ubuntu.com/ubuntu xenial-security main" >> /etc/apt/sources.list \
  && apt-get update \
  && apt-get -yqq install --no-install-recommends \
  build-essential \
  git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev \
  python3-dev python3-pip python3-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev
  
RUN cd /root \
  && git clone -b 3.4.2 https://github.com/opencv/opencv.git \
  && git clone -b 3.4.2 https://github.com/opencv/opencv_contrib.git
  

  
# install pytorch  
#RUN pip3 install --upgrade setuptools \
# && pip3 install https://download.pytorch.org/whl/cpu/torch-1.1.0-cp36-cp36m-linux_x86_64.whl \
# && pip3 install https://download.pytorch.org/whl/cpu/torchvision-0.3.0-cp36-cp36m-linux_x86_64.whl
  
# install python
# RUN pip3 install flask Flask-Cors tensorflow==1.13.1 tensorflow-serving-api==1.13.0 xmlrunner numpy 


    

    
    